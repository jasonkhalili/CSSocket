"use strict";

var _interopRequire = function (obj) { return obj && obj.__esModule ? obj["default"] : obj; };

var gulp = _interopRequire(require("gulp"));

var uglify = _interopRequire(require("gulp-uglify"));

var grename = _interopRequire(require("gulp-rename"));

var source = _interopRequire(require("vinyl-source-stream"));

var buffer = _interopRequire(require("vinyl-buffer"));

var browserify = _interopRequire(require("browserify"));

var gbabel = _interopRequire(require("gulp-babel"));

var build_path = "dst";
var transpile_path = "lib";

gulp.task("transpile", function () {
  return gulp.src("./src/**/*").pipe(gbabel({ experimental: true })).pipe(gulp.dest(transpile_path));
});

gulp.task("browserify", function () {
  return browserify("./" + transpile_path + "/index_browser.js").bundle().pipe(source("react-semantify.js")).pipe(gulp.dest(build_path)).pipe(buffer()).pipe(uglify()).pipe(grename("react-semantify.min.js")).pipe(gulp.dest(build_path));
});

gulp.task("watch", function (done) {
  gulp.watch("./src/**/*", gulp.series("build"));
  done();
});

gulp.task("build", gulp.series("transpile", "browserify"));
gulp.task("dev", gulp.series("build", "watch"));
gulp.task("default", gulp.series("build"));
